---
sidebar_position: 3
---

# Скоуп и контекст

Архитектура Chorda исходит из того, что отображение определяется состоянием, которое в свою очередь описывается переменными скоупа. Это означает, что для внесения изменений достаточно доступа к скоупу. 

:::tip
Если сравнивать с React, то скоуп можно понимать как локальный *store*, а не *state*
:::

В Chorda под *контекстом* всегда понимается родительский скоуп

### Инициализация переменных

Новые переменные скоупа добавляем в блоке `initials`.

```javascript

export default () => {
    return {
        initials: {
            // создаем реактивную переменную скоупа
            text: () => observable(''),
            // в скоуп можно положить и не реактивное значение
            name: () => 'MyComponent',
        },
    }
}
```


### Инъекция переменных

Результат инъекции не отличается от инициализации, но при инъекции нам доступен скоуп

```javascript

export default () => {
    return {
        injections: {
            cn: (scope) => scope.data,  // достаем переменную data из скоупа
        },
    }
}
```


### Реактивность компонентов

Подписку на изменения наблюдаемой переменной можно выполнить с помощью блока `reactions`

```javascript
export default () => {
    return {
        reactions: {
            // реакции компонента на изменение переменной скоупа
            data: v => patch({text: v})
        }
    }
}

```

Метод `patch` помещает задание в очередь патчей. Заданием по сути будет применение указанных опций к компоненту

:::caution
Новое значение, которое приходит в `patch` имеет терминальный статус
:::







Принципиальное отличие блоков `initials` от `injections` состоит в том, что второй принимает в качестве аргумента скоуп компонента из которого можно брать переменные для инжектирования



Передача скоупа

Контекст

injections

joints

initials

reactions

events
