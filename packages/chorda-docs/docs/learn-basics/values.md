---
sidebar_position: 4
---

#  Переменные

Переменные составляют сигнальную часть реактивной системы Chorda


## Типы переменных

:::caution Важно!
Все переменные мемоизированы по умолчанию
:::


### observable

Простая реактивная переменная

```javascript
const val = observable('')

val.$value = 'Hello' // уведомляются все подписчики
```

### computable

Вычисляемая переменная, задается функцией. У нее есть две особенности:
1. На все реактивные переменные внутри вычисления автоматически устанавливается подписка
2. Внутри функции действует **терминальный режим**

```javascript
const x = observable(1)
const y = observable(10)

const sum = computable(() => x + y)

// sum.$value == 11

x.$value = 5

// sum.$value == 15

```

:::warning
Внутри **computable** нельзя изменять состояние скоупа. Если вы хотите, чтобы ваше вычисление изменяло другие значения, то можете воспользоваться блоком `joints` или переменной **callable**
:::

### iterable ?

Обертка-итератор над реактивной переменной

Добавляет переменной метод `$each`

```javascript
const it = iterable([1, 2, 3])

it.$each(itm => {
    // реактивный элемент массива
})
```


### callable

Просто функция. Может быть асинхронной

Если результат работы `computable` это новое значение переменной, то результат `callable` можно воспринимать как выброшенное событие 

`callable` генерирует события в случае асинхронного результата. На эти события можно подписаться общим механизмом через опцию `events`

```javascript
const fn = callable(() => 5)

fn() // 5

```

## Ссылочная целостность

Реактивные переменные являются обертками над значениями. При модификациях или присвоениях ссылочно значение остается тем же самым

```javascript
const obj = {id: 1, name: 'Alice'}

const a = observable(obj)
const b = observable(obj)

a.id = 5

a.$value == b.$value // true

```

## Прокси

Все переменные используют объект `Proxy` для доступа к своим свойствам. По умолчанию каждое свойство реактивной переменной тоже является реактивным (кроме терминального режима)


## Терминальный режим

Свойства переменной в терминальном режиме проверяются на **терминальность**, т.е. на формальное отсутствие вложенных свойств (справедливо, к примеру, для примитивных типов). В этом случае свойство становится доступно по значению

```javascript
const val = observable({
    a: 5,
    b: {
        c: 'hello'
    }
})

// терминальный режим

val.a // 5

val.b // [Proxy]

val.b.c // "hello"

```
